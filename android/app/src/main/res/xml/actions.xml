<?xml version="1.0" encoding="utf-8"?>
<!--
    Google Assistant App Actions for Nex-Gen Lumina.

    These built-in intents allow Google Assistant to control the app
    via voice commands like:
    - "Hey Google, turn on my lights in Lumina"
    - "Hey Google, turn off the lights in Lumina"
    - "Hey Google, set brightness to 50% in Lumina"
    - "Hey Google, activate Game Day in Lumina"

    More info: https://developers.google.com/assistant/app/action-schema
-->
<actions>

    <!-- Built-in Intent: Turn on lights -->
    <action intentName="actions.intent.TURN_ON_LIGHTS">
        <fulfillment urlTemplate="lumina://power/on">
            <parameter-mapping
                intentParameter="smartDeviceName"
                required="false" />
        </fulfillment>
    </action>

    <!-- Built-in Intent: Turn off lights -->
    <action intentName="actions.intent.TURN_OFF_LIGHTS">
        <fulfillment urlTemplate="lumina://power/off">
            <parameter-mapping
                intentParameter="smartDeviceName"
                required="false" />
        </fulfillment>
    </action>

    <!-- Custom Intent: Apply a lighting scene by name -->
    <action intentName="custom.actions.intent.ACTIVATE_SCENE">
        <fulfillment urlTemplate="lumina://scene/apply{?name}">
            <parameter-mapping
                intentParameter="sceneName"
                urlParameter="name"
                required="true" />
        </fulfillment>

        <parameter name="sceneName">
            <!-- Scene names will come from dynamic shortcuts -->
            <entity-set-reference entitySetId="SceneEntitySet" />
        </parameter>
    </action>

    <!-- Custom Intent: Set brightness -->
    <action intentName="custom.actions.intent.SET_BRIGHTNESS">
        <fulfillment urlTemplate="lumina://brightness{?level}">
            <parameter-mapping
                intentParameter="brightnessLevel"
                urlParameter="level"
                required="true" />
        </fulfillment>

        <parameter name="brightnessLevel">
            <!-- Accept brightness as percentage (0-100), convert to 0-255 in app -->
            <entity-set-reference entitySetId="BrightnessEntitySet" />
        </parameter>
    </action>

    <!-- Custom Intent: Run scheduled lighting -->
    <action intentName="custom.actions.intent.RUN_SCHEDULE">
        <fulfillment urlTemplate="lumina://schedule/run" />
    </action>

    <!-- Capability Binding: Link shortcuts to voice commands -->
    <capability name="actions.intent.OPEN_APP_FEATURE">
        <shortcut-fulfillment>
            <!-- Maps dynamic shortcuts to voice activation -->
            <parameter-mapping
                intentParameter="feature"
                required="true" />
        </shortcut-fulfillment>
    </capability>

</actions>
