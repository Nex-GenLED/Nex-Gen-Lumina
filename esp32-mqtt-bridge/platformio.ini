; PlatformIO Project Configuration for Lumina ESP32 MQTT Bridge
;
; This firmware runs on an ESP32 and bridges MQTT messages from HiveMQ Cloud
; to local WLED devices via HTTP. It enables remote control without requiring
; WLED to support MQTT+TLS.
;
; Flow:
; 1. Lumina Backend publishes to HiveMQ Cloud
; 2. ESP32 receives MQTT message (with TLS)
; 3. ESP32 makes HTTP request to WLED on local network
; 4. ESP32 publishes response back to HiveMQ Cloud

[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200

; Use the latest Arduino ESP32 core with SSL support
platform_packages =
    platformio/framework-arduinoespressif32@^3.20014.0

lib_deps =
    ; MQTT client with SSL/TLS support
    knolleary/PubSubClient@^2.8
    ; ArduinoJson for parsing WLED responses
    bblanchon/ArduinoJson@^7.0.0
    ; WiFiManager for easy WiFi setup
    tzapu/WiFiManager@^2.0.17

build_flags =
    -DCORE_DEBUG_LEVEL=3
    ; Enable larger SSL buffer for TLS
    -DMQTT_MAX_PACKET_SIZE=2048
    -DARDUINOJSON_ENABLE_PROGMEM=0

; Upload settings
upload_speed = 921600

; Partition scheme with more app space
board_build.partitions = default.csv
